---
import Analytics from "@vercel/analytics/astro";
import SpeedInsights from "@vercel/speed-insights/astro";
import type { HTMLAttributes } from "astro/types";

import Content from "#components/content.astro";
import Footer from "#components/footer.astro";
import HeadMetadata from "#components/head-metadata.astro";
import Navigation from "#components/navigation.astro";

import "#styles/fonts.css";
import "#styles/global.css";
import "#styles/print.css";
import "#styles/tokens.css";

type Props = HTMLAttributes<"main"> & {
	title?: string;
	description?: string;
	ogImageUrl?: string | URL;
};

const { title, description, ogImageUrl, ...props } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<HeadMetadata
			title={title}
			description={description}
			ogImageUrl={ogImageUrl}
		/>

		<!-- set initial color scheme -->
		<script>
			const defaultTheme = "system";
			const storedTheme = localStorage.getItem("color-theme");

			document.documentElement.dataset.colorTheme = storedTheme ?? defaultTheme;
		</script>
	</head>

	<body>
		<Navigation />

		<Content as="main" id="main-content" {...props}><slot /></Content>

		<Footer />

		<Analytics />
		<SpeedInsights />
	</body>
</html>
